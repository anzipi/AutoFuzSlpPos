{"name":"AutoFuzSlpPos","tagline":"Automatic for Deriving Fuzzy Slope Positions","body":"# Welcome to AutoFuzSlpPos\r\n----------\r\nAutoFuzSlpPos (short for \"**Automated for Fuzzy Slope Position**\") is developed by PhD candidate Liang-Jun Zhu and **Prof.** Cheng-Zhi Qin in Lreis, IGSNRR, CAS, China.\r\n\r\nContact and support email: zlj@lreis.ac.cn\r\nUpdate date: 2016-1-29\r\n\r\n1. [Introduction](#1-introduction)\r\n2. [Installation](#2-installation)\t\r\n\t- [Code structure](#21-code-structure)\r\n\t- [Installation on Windows](#22-installation-on-windows)\r\n\t- [Installation on Linux/Unix](#23-installation-on-linuxunix)\r\n\t- [Configuration](#24-configuration) \r\n3. [Run AutoFuzSlpPos](#3-run-autofuzslppos)\r\n\r\n\r\n# 1 Introduction\r\n\r\nAutoFuzSlpPos is an automatic approach with only one required input data (i.e., a gridded DEM of the study area) to deriving fuzzy slope positions based on the prototype-based method proposed by Qin *et al*. (2009. Quantification of spatial gradation of slope positions. Geomorphology 110, 152-161.). \r\n\r\nThe prototype-based method consists three major steps, i.e., preparing topographic attributes, extracting typical locations, and calculating similarity for each slope position.\r\n\r\nThe preliminary implementation employs the system of five basic slope positions.\r\n\r\nAutoFuzSlpPos V1.0 is developed under the [TauDEM parallelized framework](http://hydrology.usu.edu/taudem/taudem5/index.html \"TauDEM\") and programmed using C++ and Python language. \r\n\r\nThe program is capable with Windows and Linux/Unix, e.g., Windows 7/8/10, CentOS 6.2, and Ubuntu 14.04. The  prerequisites environment of the compilation  and configuration of AutoFuzSlpPos is as follows:\r\n\r\n- For PC, [Microsoft Visual C++ Redistributable](https://www.microsoft.com/en-us/download/details.aspx?id=14632) (e.g., VS 2010), [Microsoft HPC Pack 2012 MS-MPI Redistributable Package](https://www.microsoft.com/en-US/download/details.aspx?id=14737), CMAKE\r\n- For Linux/Unix, GCC 4.7+, MAKE, and MPICH or OpenMPI\r\n- Python 2.7+ packaged with Numpy 1.6+ and GDAL 1.9+.\r\n\r\n# 2 Installation\r\n\r\nIf you want to install from source code, please follow [Installation on Windows](2.2 Installation on Windows) or [Installation on Linux/Unix](2.3 Installation on Linux/Unix). If you want to use AutoFuzSlpPos directly with the compiled executable files, please refers to [Configuration](2.4 Configuration).\r\n\r\n## 2.1 Code structure\r\nThe source code consists of two parts: 1) the C++ source code located in `../<source-code>/src`, and 2) python scripts located in `../source-code/src`. \r\n\r\nC++ code will be compiled as separated executable files, such as \"**SelectTypLocSlpPos**\" which is used for extracting typical locations and setting parameters for fuzzy inference of each slope position.\r\n \r\nPython script is to organize the whole work-flow with a configurable script for users’ customizing optional parameters, such as follows.\r\n\r\n| Script | Functionality |\r\n|--------|---------------|\r\n| `main.py`| The entrance of AutoFuzSlpPos |\r\n| `Config.py` | The configuration file for user customization |\r\n| `Nomenclature.py` | Predefined filenames |\r\n| `TauDEM.py` | Functions  based  on  TauDEM  and  the  extension  functions,  e.g., SelectTypLocSlpPos |\r\n| `Util.py` | Some fundamental functions, e.g., functions for the Input/Output of raster data |\r\n| `PreProcessing.py` | Preprocessing  for  topographic  attributes,  such  as  relative  position index (RPI), profile curvature |\r\n| `SelectTypLoc.py` | Prepare input files for typical location extraction |\r\n| `FuzzySlpPosInference.py` | Prepare input files for fuzzy inference of each slope position |\r\n\r\n\r\n## 2.2 Installation on Windows\r\n\r\nThe MPI library used for PC is [Microsoft HPC Pack 2012 MS-MPI Redistributable Package](https://technet.microsoft.com/en-us/library/cc514029.aspx \"MS-MPI\"). Please make sure that CMAKE and nmake (installed with Visual Studio, such as VS2010) have been installed on your PC. It is highly recommended to check the MPI Library path in `../<source-code>/src/CMakeLists.txt` to make sure they are correct for user’s environment:\r\n\r\n~~~\r\ninclude_directories(\"C:/Program Files/Microsoft HPC Pack 2012/Inc\")\r\nlink_directories(\"C:/Program Files/Microsoft HPC Pack 2012/Lib/i386\")\r\nlink_libraries(\"C:/Program Files/Microsoft HPC Pack 2012/Lib/i386/msmpi.lib\")\r\n~~~\r\nThen, open “Visual Studio Command Prompt” from Start menu (as administrator), and run the following commands:\r\n\r\n~~~\r\ncd <Build_Path>\r\ncmake -G \"NMake Makefiles\" <Source_Path>\r\nnmake\r\n\r\ne.g.,\r\ncd C:\\AutoFuzSlpPos\\build\r\ncmake -G \"NMake Makefiles\" C:\\source-code\\src\r\nnmake\r\n~~~\r\n\r\nThe executable files will be compiled and saved in `<Build_Path>`.\r\n\r\n## 2.3 Installation on Linux/Unix\r\n\r\nUnlike the MPI version for PC, the implementation of [MPICH](http://www.mpich.org/downloads/ \"MPICH\") is adopted for Linux/Unix platform.\r\n\r\nFirstly, check the MPI Library path in `../<source-code>/src/makefile` to make sure that it is correct for your environment:\r\n~~~\r\nMPI_DIR = /home/zhulj/mpich/\r\n~~~\r\nThen, assign the installation path:\r\n~~~\r\nINSTALLDIR=/home/zhulj/AutoFuzSlpPos/exec_linux\r\n~~~\r\n\r\nLastly, run the following commands:\r\n~~~\r\ncd <Source_Path/src>\r\nmake\r\n~~~ \r\nThe executable files will be generated in `INSTALLDIR`.\r\n## 2.4 Configuration\r\n\r\nA script program of Python language is implemented to organize the work-flow of deriving fuzzy slope positions.\r\nYou can configure the environment of AutoFuzSlpPos through the configuration file `../source-code/py_main/Config.py`. The path of the executable files must be set as follows:\r\n~~~\r\nmpiexeDir = r'/home/zhulj/mpich/bin' or None\r\nexeDir = r'/home/zhulj/AutoFuzSlpPos/exec_linux'\r\nhostfile = r'/home/zhulj/AutoFuzSlpPos/exec_linux/dgpm' or None\r\n~~~\r\nNote that, if the path of MPI is ENVIRONMENT PATH in your system, the mpiexeDir could be set as `None`. The `hostfile` is used to specify the hosts on which the MPI jobs will be run. If you does not know how to prepare the `hostfile`, just leave it as `hostfile = None`.\r\n\r\nAfter that, you can run AutoFuzSlpPos program for a specific study area.\r\n\r\n# 3 Run AutoFuzSlpPos\r\n\r\n\r\nThe only required data is the digital elevation model (DEM) of the study area. The first step of running AutoFuzSlpPos program is to assign your DEM path to `rawdem`. Then, the workspace `rootDir` needs to be set.\r\n\r\nOther parameters can be left as default. These optional parameters are briefly introduced in the configuration script `../<source-code>/py_main/Config.py`.\r\n\r\nThe following command is used to run AutoFuzSlpPos:\r\n~~~\r\npython ../<source-code>/py_main/main.py\r\n~~~\r\n\r\nThe following table gives a brief introduction to the result files.\r\n\r\n| Result Folder | Introduction |\r\n|---|---|\r\n| FuzzySlpPos | Similarity maps of each slope position, as well as the hardened map of slope positions and the corresponding maximum similarity map |\r\n| DinfpreDir | Intermediate files in preparing topographic attributes |\r\n| Params | GRID  of  topographic  attributes,  including  RPI  (Relative  Position  Index), profile curvature, slope gradient, and HAND (Height Above the Nearest Drainage), by default. |\r\n| Config | Configuration files of the extraction of typical locations and fuzzy inference for each slope positions |\r\n| TypLoc | Typical locations of each slope positions |\r\n| Log | Log files which record information such as runtime, etc. |\r\n\r\nNote that in the current implementation a system of five basic slope positions is used, i.e., ridge(RDG), shoulder slope (SHD), backslope (BKS), footslope (FTS), and valley (VLY).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}